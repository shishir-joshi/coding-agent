# Tiny Tool-Using LLM Agent (Learning Project)

A very small CLI "agent" that:
- Chats with you in a REPL
- **Automatically generates and tracks plans** for complex multi-step tasks
- Calls tools (read files, search, write files)
- Applies patches (diff-style edits)
- Shows minimal progress indicators (✓, →, ·)
- Saves a basic history log

## Quickstart

1) Set env vars:

- `OPENAI_API_KEY` (required)
- `OPENAI_MODEL` (optional, default: `gpt-4o-mini`)
- `OPENAI_BASE_URL` (optional, default: `https://api.openai.com/v1`)

2) Run:

```bash
python3 -m agent
```

## Features

### ✨ Plan Generation

For complex requests, the agent automatically:
1. Generates a structured multi-step plan
2. Shows you the plan for approval
3. Executes step-by-step with progress tracking
4. Updates the banner as steps complete

Example:
```
> Refactor auth to use JWT tokens

┌─────────────────────────────────┐
│ Active Plan                     │
│   → Analyze current auth        │
│   · Design JWT structure        │
│   · Implement token logic       │
│   · Add tests                   │
└─────────────────────────────────┘

Approve plan? [Y/n]
```

See [docs/PLAN_GENERATION.md](docs/PLAN_GENERATION.md) for details.

Disable with: `python3 -m agent --no-plan`

## REPL commands

- `/help` – show help
- `/context` – print the current LLM message context (system + conversation + tool outputs)
- `/history [n]` – show last n turns from the on-disk history log (default 10)
- `/reset` – clears in-memory context (does not delete history log)
- `/exit` – quit

## Notes

- This project intentionally avoids fancy features (streaming UI, embeddings, vector DBs, etc.).
- The patch tool is intentionally simple: it’s designed for patches *generated by the agent itself*.
## Future Directions

1. **Plan mode** – ✅ DONE! Automatic plan generation with step-by-step execution and progress tracking
2. **Agent mode** – Autonomous execution with checkpoints and approval gates
3. **Better search and indexing** – Semantic search, file indexing, and AST-aware code navigation